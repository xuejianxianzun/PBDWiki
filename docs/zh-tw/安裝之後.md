# 安裝之後

## 登入 Pixiv 帳號

你需要在 Pixiv 處於登入狀態，才能正常使用下載器。

若未登入 Pixiv 帳號，將無法使用下載器的大部分功能。

## 檢查瀏覽器的下載設定

打開下載設定：

![](./images/20250820_140119.png)

在瀏覽器的下載設定中，你可以確認以下內容：

1. 檔案儲存位置。下載器下載的檔案將儲存在此目錄中。

2. **關閉**「每次下載前詢問檔案儲存位置」。否則每次下載檔案時都會彈出一次「另存為」對話框。

!> 如果你已關閉第二項，但下載時仍出現「另存為」對話框，可能是因為下載的檔案名稱重複。請參考「常見問題」頁面的「下載時彈出另存為對話框」條目。

## 下載後的檔案名稱異常問題

本擴展程式可為下載的檔案設定自訂檔案名稱，但某些**管理下載**的擴展程式可能會修改檔案名稱，導致檔案名稱異常。

這類擴展程式的數量很多（即使它們未在 Pixiv 或 Fanbox 上運行，也可能導致此問題）。根據近期反饋，導致此問題的擴展程式通常包括 Patreon Downloader、IDM Integration Module 等。

如果下載後的檔案名稱是一串隨機的字母和數字，或未遵循下載器設定中的命名規則，則表示發生了此問題。

### 處理方法

如果你遇到此問題，可以考慮以下處理方法：

**方法 1：**

你可以新建一個瀏覽器本地使用者來使用此下載器。點擊瀏覽器右上角的頭像圖標，可創建新的個人資料或設定（無需登入瀏覽器廠商的帳號）。每個瀏覽器使用者的設定都是獨立的，你可以在新使用者的視窗中僅安裝此擴展程式。當你需要下載 Pixiv 的檔案時，使用此使用者進行下載，即可避免其他擴展程式的影響。

**方法 2：**

你可以找出導致此問題的擴展程式，並在使用本下載器時暫時禁用它們。這些擴展程式通常具有管理下載檔案的功能，例如：IDM Integration Module、Chrono 下載管理器、Image Downloader 等。如果你不確定是哪個擴展程式導致問題，可以先禁用所有擴展程式，然後逐一啟用並使用下載器進行下載，這樣即可找出導致問題的擴展程式。

### 技術細節

某些擴展程式會監聽 `chrome.downloads.onDeterminingFilename` 事件，這很容易導致預設的檔案名稱丟失。

假設本下載器為某個檔案設定了自訂檔案名稱：`user/image.jpg`。

如果有其他擴展程式監聽了 `onDeterminingFilename` 事件，瀏覽器會詢問其對檔案名稱的建議（使其有機會修改檔案名稱）。問題在於：此時瀏覽器傳遞的檔案名稱是預設的（即 URL 中的最後一段路徑），而不是下載器設定的檔案名稱。

因此，下載器設定的檔案名稱會丟失，檔案名稱將變成 URL 中的最後一段路徑。

### 已知的衝突擴展程式

以下是一些已知會引起衝突的擴展程式：

- IDM Integration Module

![](./images/20250820_140536.png)

- Chrono 下載管理器

![](./images/2021-11-12_174410.png)

- BitComet 擴展程式

![](./images/2021-11-12_174403.png)

- Free Download Manager

![](./images/2021-11-12_174418.png)

- Media Harvest : Twitter 多媒體下載器

![](./images/2022-01-06_212820.png)

- Image Downloader

![](./images/20220310221554.png)

- DownThemAll!

![](./images/20220322084123.png)

- Double-click Image Downloader

![](./images/20221228_182641.png)

- Patreon Downloader

![](./images/20230326_123231.png)

## 不要攔截 Pixiv 的圖片

在 Chrome 中，使用者可以設定攔截網頁上的圖片，如此 Chrome 將不會下載並顯示該網頁上的圖片。

當 Chrome 攔截了 Pixiv 的圖片時，會在地址欄右側顯示一個攔截圖標。

![](./images/2021-11-11_180406.png)

請不要攔截 Pixiv 的圖片，否則本程式無法下載圖片。